<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Basic Workflow • vigicaen</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Basic Workflow">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">vigicaen</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.15.5.9002</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/getting_started.html">Getting started</a></li>
    <li><a class="dropdown-item" href="../articles/basic_workflow.html">Basic Workflow</a></li>
    <li><a class="dropdown-item" href="../articles/routine_pharmacovigilance.html">Routine pharmacovigilance</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Going further</h6></li>
    <li><a class="dropdown-item" href="../articles/descriptive.html">Descriptive</a></li>
    <li><a class="dropdown-item" href="../articles/interactions.html">Interactions</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Script templates</h6></li>
    <li><a class="dropdown-item" href="../articles/template_dictionary.html">Dictionary</a></li>
    <li><a class="dropdown-item" href="../articles/template_main.html">Data management and disproportionality</a></li>
    <li><a class="dropdown-item" href="../articles/template_routine.html">Routine</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/pharmacologie-caen/vigicaen/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Basic Workflow</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/pharmacologie-caen/vigicaen/blob/master/vignettes/basic_workflow.Rmd" class="external-link"><code>vignettes/basic_workflow.Rmd</code></a></small>
      <div class="d-none name"><code>basic_workflow.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<div class="section level3">
<h3 id="objectives">Objectives<a class="anchor" aria-label="anchor" href="#objectives"></a>
</h3>
<ul>
<li><p>Collect drug and adverse drug reaction
<strong>IDs</strong></p></li>
<li><p>Perform standard data management in VigiBase ECL</p></li>
<li><p>Conduct disproportionality analysis (both univariate and
multivariate)</p></li>
</ul>
<p>If you want to access script templates for these steps, see</p>
<ul>
<li><p><code><a href="../articles/template_dictionary.html">vignette("template_dictionary")</a></code> and</p></li>
<li><p><code><a href="../articles/template_main.html">vignette("template_main")</a></code></p></li>
</ul>
</div>
<div class="section level3">
<h3 id="reminder-of-database-structure">Reminder of Database Structure<a class="anchor" aria-label="anchor" href="#reminder-of-database-structure"></a>
</h3>
<p>Each table has a unique identifying key and other keys to perform
joins.</p>
<table class="table">
<thead><tr class="header">
<th>Table</th>
<th>Key</th>
<th>Other keys</th>
</tr></thead>
<tbody>
<tr class="odd">
<td><code>demo</code></td>
<td><code>UMCReportId</code></td>
<td></td>
</tr>
<tr class="even">
<td><code>drug</code></td>
<td><code>Drug_Id</code></td>
<td><code>UMCReportId</code></td>
</tr>
<tr class="odd">
<td><code>adr</code></td>
<td><code>Adr_Id</code></td>
<td><code>UMCReportId</code></td>
</tr>
</tbody>
</table>
<blockquote>
<p>Goal of the tutorial: perform a disproportionality analysis between
colitis and nivolumab among checkpoint inhibitor cases.</p>
</blockquote>
</div>
<div class="section level3">
<h3 id="step-0-load-packages">Step 0: Load Packages<a class="anchor" aria-label="anchor" href="#step-0-load-packages"></a>
</h3>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/pharmacologie-caen/vigicaen" class="external-link">vigicaen</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://rlang.r-lib.org" class="external-link">rlang</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="building_tables">Build tables from source files<a class="anchor" aria-label="anchor" href="#building_tables"></a>
</h2>
<p>This process should be done <strong>once per database
version</strong>.</p>
<p>You don’t have to do it to follow this tutorial, since we will use
the package built-in example tables.</p>
<p>However, when working on real analyses, you will need to process this
step first.</p>
<p>See the vignette here <code><a href="../articles/getting_started.html">vignette("getting_started")</a></code>.</p>
</div>
<div class="section level2">
<h2 id="collecting_ids">Collecting IDs<a class="anchor" aria-label="anchor" href="#collecting_ids"></a>
</h2>
<p>The whole package relies on defining a dictionary of drugs and adrs
of interest.</p>
<p>Those collection of terms should be stored in <strong>named
lists</strong>.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># drug selection</span></span>
<span><span class="va">d_sel</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    nivolumab   <span class="op">=</span> <span class="st">"nivolumab"</span>,</span>
<span>    ipilimumab  <span class="op">=</span> <span class="st">"ipilimumab"</span>,</span>
<span>    nivo_or_ipi <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"nivolumab"</span>, <span class="st">"ipilimumab"</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="co"># adverse drug reaction selection</span></span>
<span></span>
<span><span class="va">a_sel</span> <span class="op">&lt;-</span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    colitis     <span class="op">=</span> <span class="st">"Colitis"</span>,</span>
<span>    pneumonitis <span class="op">=</span> <span class="st">"Pneumonitis"</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<p>As we see, the <code>d_sel</code> list contains three named vectors:
nivolumab, ipilimumab, and nivo_or_ipi. Each of these vectors can
contain one or more names of drugs.</p>
<blockquote>
<p>The names of the vectors don’t have to be the same as the drug names.
They will be used to created columns later in the process.</p>
</blockquote>
<p>We will pass these named list selections to <em>ID collector</em>
functions: The <strong><code>get_*</code></strong> family.</p>
<ul>
<li><p><code><a href="../reference/get_drecno.html">get_drecno()</a></code> for drugs, <code><a href="../reference/get_atc_code.html">get_atc_code()</a></code>
for ATC classes</p></li>
<li><p><code><a href="../reference/get_llt_soc.html">get_llt_soc()</a></code> or <code><a href="../reference/get_llt_smq.html">get_llt_smq()</a></code> for
adverse drug reactions</p></li>
</ul>
<p>These functions will allow to collect IDs (e.g. codes) matching our
drugs and adrs in a specific dictionary.</p>
<ul>
<li><p>For drugs, we will use the WHODrug dictionary, and collect Drug
Record Numbers (DrecNos) most of the time, or Medicinal Product Ids
(MedicinalProd_Ids) in some specific scenarii.</p></li>
<li><p>For adrs, we will use the Medical Dictionary for Regulatory
Activities (MedDRA), and collect term codes (low-level term codes).
Here, it is important to note that we can work with other terms (like
Preferred Terms, High Level terms, etc.). The ID collector will just
collect low-level term codes of all higher level terms, resulting in a
pretty long list of codes, because VigiBase data is structured on
low-level term codes.</p></li>
</ul>
</div>
<div class="section level2">
<h2 id="data-management">Data management<a class="anchor" aria-label="anchor" href="#data-management"></a>
</h2>
<div class="section level3">
<h3 id="drug_workflow">Drugs<a class="anchor" aria-label="anchor" href="#drug_workflow"></a>
</h3>
<div class="section level4">
<h4 id="principle">Principle<a class="anchor" aria-label="anchor" href="#principle"></a>
</h4>
<ol style="list-style-type: decimal">
<li>Load the <code>demo</code>, <code>drug</code>, and <code>mp</code>
tables.</li>
<li>Select one or more medications of interest.</li>
<li>Identify the drug codes (e.g., the <code>DrecNo(s)</code>)
associated with these drug using the <code>mp</code> table.</li>
<li>Search for cases exposed to these medications using the codes in the
<code>drug</code> table.</li>
<li>Update the <code>demo</code> table: code 1 if the case reports the
medication of interest, 0 otherwise.</li>
<li>Check your data management</li>
</ol>
<p>Step 1 is performed with <code><a href="../reference/dt_parquet.html">dt_parquet()</a></code> if you have <a href="#building_tables">your own tables</a>, or using the built-in
example tables for this tutorial.</p>
<p>Step 2 and 3 can be referred as “dictionary” steps.</p>
<p>Step 3 is performed with <code><a href="../reference/get_drecno.html">get_drecno()</a></code> or
<code><a href="../reference/get_atc_code.html">get_atc_code()</a></code>.</p>
<p>Steps 4 and 5 are performed with <code><a href="../reference/add_drug.html">add_drug()</a></code>.</p>
<p>step 6 is performed with <code><a href="../reference/check_dm.html">check_dm()</a></code>.</p>
</div>
<div class="section level4">
<h4 id="step-1-load-the-tables">Step 1: Load the tables<a class="anchor" aria-label="anchor" href="#step-1-load-the-tables"></a>
</h4>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">demo</span> <span class="op">&lt;-</span> <span class="va">demo_</span></span>
<span><span class="va">drug</span> <span class="op">&lt;-</span> <span class="va">drug_</span></span>
<span></span>
<span><span class="va">mp</span> <span class="op">&lt;-</span> <span class="va">mp_</span></span></code></pre></div>
<blockquote>
<p>Note: if you are working with your own tables, you will need to load
them here, with <code><a href="../reference/dt_parquet.html">dt_parquet()</a></code>.</p>
</blockquote>
</div>
<div class="section level4">
<h4 id="step-2-choose-drugs-of-interest">Step 2: Choose drugs of Interest<a class="anchor" aria-label="anchor" href="#step-2-choose-drugs-of-interest"></a>
</h4>
<p>This is probably the most interesting part of the process, from a
scientific point of view. But for now, it’s pretty trivial.</p>
<p>Once you’ve decided which drugs you would like to study
(e.g. nivolumab in this tutorial), you need to create a <strong>named
list</strong> of character vectors.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">d_sel</span> <span class="op">&lt;-</span> <span class="co"># drug selection</span></span>
<span>  <span class="fu"><a href="https://rlang.r-lib.org/reference/list2.html" class="external-link">list2</a></span><span class="op">(</span></span>
<span>    nivolumab <span class="op">=</span> <span class="st">"nivolumab"</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="va">d_sel</span></span>
<span><span class="co">#&gt; $nivolumab</span></span>
<span><span class="co">#&gt; [1] "nivolumab"</span></span></code></pre></div>
<blockquote>
<p>Remember to use lower case names in d_sel (no capital letters: Good:
“nivolumab”, Wrong: “Nivolumab” or “NIVOLUMAB”)</p>
</blockquote>
<p>The ideal way of picking drugs is by using their <strong>WHO
name</strong>.</p>
<p>WHO name is an international non-proprietary name (INN) for the drug.
A few drugs have more than one INN (e.g. paracetamol and acetaminophen),
but they still have a unique WHO name (most of the time, one of the
INN).</p>
<p>The ID collector <code><a href="../reference/get_drecno.html">get_drecno()</a></code> will let you know if you
missed the WHO name.</p>
<p>Alternatively, you can work with Anatomical and Therapeutical
Classification (ATC) codes to investigate a set of drug. This is
explained in the <a href="#atc_classes">ATC section</a>.</p>
</div>
<div class="section level4">
<h4 id="step-3-identify-drug-codes">Step 3: Identify drug codes<a class="anchor" aria-label="anchor" href="#step-3-identify-drug-codes"></a>
</h4>
<p>The function <code><a href="../reference/get_drecno.html">get_drecno()</a></code> allows you to query the
<code>mp</code> table with a selection of drug names.</p>
<p>It takes several arguments, two of which must be filled in: the
selection of drugs and the table containing the correspondence between
the name and the code (here, <code>mp</code>).</p>
<p>You should <strong>always</strong> look carefully at the printed
message.</p>
<ol style="list-style-type: decimal">
<li>Use <code><a href="../reference/get_drecno.html">get_drecno()</a></code> with argument
<code>verbose = TRUE</code> (default).</li>
</ol>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/get_drecno.html">get_drecno</a></span><span class="op">(</span></span>
<span>  d_sel <span class="op">=</span> <span class="va">d_sel</span>,</span>
<span>  mp <span class="op">=</span> <span class="va">mp_</span>,</span>
<span>  verbose <span class="op">=</span> <span class="cn">TRUE</span></span>
<span>  <span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">──</span> <span style="font-weight: bold;">get_drecno()</span> <span style="color: #00BBBB;">────────────────────────────────────────────────────────────────</span></span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── <span style="font-weight: bold;">`d_sel`: Matching drugs</span> ──</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── <span style="color: #00BB00;">✔</span> Matched drugs</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; → `nivolumab`: <span style="color: #0000BB;">"nivolumab"</span> and <span style="color: #0000BB;">"ipilimumab;nivolumab"</span></span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> Set `verbose` to FALSE to suppress this section.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ────────────────────────────────────────────────────────────────────────────────</span></span>
<span><span class="co">#&gt; $nivolumab</span></span>
<span><span class="co">#&gt; [1] 111841511  98742214</span></span></code></pre></div>
<p>We see that <code><a href="../reference/get_drecno.html">get_drecno()</a></code> finds two entries containing
the drug “nivolumab” in the <code>mp</code> table:</p>
<ul>
<li><p>The entry for nivolumab alone</p></li>
<li><p>The entry for the ipilimumab;nivolumab combination</p></li>
</ul>
<p>This second entry was identified because the
<code>allow_combination</code> argument is set to <code>TRUE</code> by
default. This allows for a broader identification of all specialties
containing nivolumab. In this situation, this behavior is desirable
because we want to be sure to identify all cases reporting the drug.</p>
<ol start="2" style="list-style-type: decimal">
<li>Since these are actually the codes we were looking for, we can
(optionally) set the <code>verbose</code> argument to FALSE and keep the
result in an R object called <code>d_drecno</code>.</li>
</ol>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">d_drecno</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu"><a href="../reference/get_drecno.html">get_drecno</a></span><span class="op">(</span></span>
<span>    d_sel <span class="op">=</span> <span class="va">d_sel</span>,</span>
<span>    mp <span class="op">=</span> <span class="va">mp_</span>,</span>
<span>    verbose <span class="op">=</span> <span class="cn">FALSE</span></span>
<span>    <span class="op">)</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="steps-4-and-5-add_drug-function">Steps 4 and 5: add_drug() function<a class="anchor" aria-label="anchor" href="#steps-4-and-5-add_drug-function"></a>
</h4>
<p>To identify cases reporting the drug of interest and add the
corresponding column to <code>demo</code>, we use the
<code><a href="../reference/add_drug.html">add_drug()</a></code> function.</p>
<p>The <code><a href="../reference/add_drug.html">add_drug()</a></code> function takes 3 mandatory arguments:</p>
<ul>
<li><p>The dataset on which to add the drug variable(s) (here,
<code>demo</code>)</p></li>
<li><p>A named list containing the codes of the drug(s)</p></li>
<li><p>The <code>drug</code> table linking drug intake to each
case.</p></li>
</ul>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">demo</span> <span class="op">&lt;-</span> </span>
<span>  <span class="fu"><a href="../reference/add_drug.html">add_drug</a></span><span class="op">(</span></span>
<span>    .data <span class="op">=</span> <span class="va">demo</span>,</span>
<span>    d_code <span class="op">=</span> <span class="va">d_drecno</span>,</span>
<span>    drug_data <span class="op">=</span> <span class="va">drug</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> `.data` detected as `demo` table.</span></span>
<span><span class="va">demo</span></span>
<span><span class="co">#&gt;      UMCReportId AgeGroup Gender DateDatabase   Type Region FirstDateDatabase</span></span>
<span><span class="co">#&gt;            &lt;int&gt;   &lt;char&gt; &lt;char&gt;       &lt;char&gt; &lt;char&gt; &lt;char&gt;            &lt;char&gt;</span></span>
<span><span class="co">#&gt;   1:   141557914        7      2     20210927      2      4          20200703</span></span>
<span><span class="co">#&gt;   2:    48453218        9      -     20170809      1      2          20170809</span></span>
<span><span class="co">#&gt;   3:   127169804        6      2     20150814      1      2          20150814</span></span>
<span><span class="co">#&gt;   4:    35746144        6      1     20120221      1      2          20111114</span></span>
<span><span class="co">#&gt;   5:   143784377        9      1     20190418      1      2          20190418</span></span>
<span><span class="co">#&gt;  ---                                                                         </span></span>
<span><span class="co">#&gt; 746:    48354189        6      1     20150814      2      2          20150814</span></span>
<span><span class="co">#&gt; 747:    20398003        7      1     20220107      1      3          20211001</span></span>
<span><span class="co">#&gt; 748:   109565701        8      1     20220107      1      3          20220107</span></span>
<span><span class="co">#&gt; 749:    95759941        9      1     20200301      2      4          20180810</span></span>
<span><span class="co">#&gt; 750:    76017998        7      1     20210301      2      4          20201216</span></span>
<span><span class="co">#&gt;      nivolumab</span></span>
<span><span class="co">#&gt;          &lt;num&gt;</span></span>
<span><span class="co">#&gt;   1:         0</span></span>
<span><span class="co">#&gt;   2:         0</span></span>
<span><span class="co">#&gt;   3:         0</span></span>
<span><span class="co">#&gt;   4:         0</span></span>
<span><span class="co">#&gt;   5:         1</span></span>
<span><span class="co">#&gt;  ---          </span></span>
<span><span class="co">#&gt; 746:         0</span></span>
<span><span class="co">#&gt; 747:         0</span></span>
<span><span class="co">#&gt; 748:         0</span></span>
<span><span class="co">#&gt; 749:         1</span></span>
<span><span class="co">#&gt; 750:         0</span></span></code></pre></div>
<p>Or, in tidyverse syntax</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">demo</span> <span class="op">&lt;-</span> </span>
<span>  <span class="va">demo</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="../reference/add_drug.html">add_drug</a></span><span class="op">(</span></span>
<span>    d_code <span class="op">=</span> <span class="va">d_drecno</span>,</span>
<span>    drug_data <span class="op">=</span> <span class="va">drug</span></span>
<span>  <span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> `.data` detected as `demo` table.</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="step-6-check-your-data-management">Step 6: Check your data management<a class="anchor" aria-label="anchor" href="#step-6-check-your-data-management"></a>
</h4>
<p>This may seem trivial, but it is an <strong>essential</strong> step
in the construction of a dataset.</p>
<p>There are many ways to check that the code has worked. Here, the
<code><a href="../reference/check_dm.html">check_dm()</a></code> function will count the number of rows in the
dataset where the desired column is equal to 1.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/check_dm.html">check_dm</a></span><span class="op">(</span><span class="va">demo</span>, <span class="st">"nivolumab"</span><span class="op">)</span></span>
<span><span class="co">#&gt;           [,1]</span></span>
<span><span class="co">#&gt; nivolumab  225</span></span></code></pre></div>
<p>It shows how many rows in <code>demo</code> have the value 1 in the
<code>nivolumab</code> column (e.g. how many cases where identified as
reporting on nivolumab reactions).</p>
<p>Here, we see that 225 cases report nivolumab.</p>
</div>
<div class="section level4">
<h4 id="atc_classes">Step 2 and 3 variant: ATC classes<a class="anchor" aria-label="anchor" href="#atc_classes"></a>
</h4>
<p>The correspondence between ATC (Anatomical and Therapeutical
Classification) classes and drug codes is found in the <code>thg</code>
table. In this table, drug codes are stored as
<code>MedicinalProd_Id</code>. It is therefore necessary to make a
second correspondence with <code>mp</code> to find
<code>DrecNo</code>.</p>
<p>This can be done with the <code><a href="../reference/get_atc_code.html">get_atc_code()</a></code> function.</p>
<p>As with drugs, we first need to identify the ATC class of interest
(here, “L03”).</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">atc_sel</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu"><a href="https://rlang.r-lib.org/reference/list2.html" class="external-link">list2</a></span><span class="op">(</span>l03 <span class="op">=</span> <span class="st">"L03"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">atc_drecno</span> <span class="op">&lt;-</span> </span>
<span>  <span class="fu"><a href="../reference/get_atc_code.html">get_atc_code</a></span><span class="op">(</span></span>
<span>    atc_sel <span class="op">=</span> <span class="va">atc_sel</span>,</span>
<span>    mp <span class="op">=</span> <span class="va">mp</span>,</span>
<span>    thg_data <span class="op">=</span> <span class="va">thg_</span></span>
<span>    <span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> vigilyze set to TRUE, extracting DrecNos (?get_atc_code for details)</span></span></code></pre></div>
<p>The <code><a href="../reference/get_atc_code.html">get_atc_code()</a></code> function requires the <code>mp</code>
and <code>thg</code> tables, as well as the selection of ATC
classes.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">atc_drecno</span><span class="op">)</span></span>
<span><span class="co">#&gt; List of 1</span></span>
<span><span class="co">#&gt;  $ l03: int [1:13] 22001499 140973512 101027183 124637140 39319101 87207610 121794236 68274950 95345772 88621728 ...</span></span></code></pre></div>
<p>By default, this function retrieves DrecNos associated with an ATC
class. It is possible to retrieve MedicinalProd_Ids instead by setting
the <code>vigilyze</code> argument to <code>FALSE</code>.</p>
<p>The interest of using MedicinalProd_Ids instead of DrecNos is to
restrict the drug panel only to packages corresponding to a specific ATC
class (e.g., you might not want to find all packages of corticosteroids
if you work with the ATC class “S01BA”, which corresponds to ophtalmic
steroids).</p>
<p>Once DrecNos are identified, we can add them to the <code>demo</code>
table, with the <code><a href="../reference/add_drug.html">add_drug()</a></code> function.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">demo</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="../reference/add_drug.html">add_drug</a></span><span class="op">(</span></span>
<span>    d_code <span class="op">=</span> <span class="va">atc_drecno</span>,</span>
<span>    drug_data <span class="op">=</span> <span class="va">drug</span></span>
<span>  <span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> `.data` detected as `demo` table.</span></span>
<span><span class="co">#&gt;      UMCReportId AgeGroup Gender DateDatabase   Type Region FirstDateDatabase</span></span>
<span><span class="co">#&gt;            &lt;int&gt;   &lt;char&gt; &lt;char&gt;       &lt;char&gt; &lt;char&gt; &lt;char&gt;            &lt;char&gt;</span></span>
<span><span class="co">#&gt;   1:   141557914        7      2     20210927      2      4          20200703</span></span>
<span><span class="co">#&gt;   2:    48453218        9      -     20170809      1      2          20170809</span></span>
<span><span class="co">#&gt;   3:   127169804        6      2     20150814      1      2          20150814</span></span>
<span><span class="co">#&gt;   4:    35746144        6      1     20120221      1      2          20111114</span></span>
<span><span class="co">#&gt;   5:   143784377        9      1     20190418      1      2          20190418</span></span>
<span><span class="co">#&gt;  ---                                                                         </span></span>
<span><span class="co">#&gt; 746:    48354189        6      1     20150814      2      2          20150814</span></span>
<span><span class="co">#&gt; 747:    20398003        7      1     20220107      1      3          20211001</span></span>
<span><span class="co">#&gt; 748:   109565701        8      1     20220107      1      3          20220107</span></span>
<span><span class="co">#&gt; 749:    95759941        9      1     20200301      2      4          20180810</span></span>
<span><span class="co">#&gt; 750:    76017998        7      1     20210301      2      4          20201216</span></span>
<span><span class="co">#&gt;      nivolumab   l03</span></span>
<span><span class="co">#&gt;          &lt;num&gt; &lt;num&gt;</span></span>
<span><span class="co">#&gt;   1:         0     0</span></span>
<span><span class="co">#&gt;   2:         0     0</span></span>
<span><span class="co">#&gt;   3:         0     0</span></span>
<span><span class="co">#&gt;   4:         0     0</span></span>
<span><span class="co">#&gt;   5:         1     0</span></span>
<span><span class="co">#&gt;  ---                </span></span>
<span><span class="co">#&gt; 746:         0     0</span></span>
<span><span class="co">#&gt; 747:         0     0</span></span>
<span><span class="co">#&gt; 748:         0     0</span></span>
<span><span class="co">#&gt; 749:         1     0</span></span>
<span><span class="co">#&gt; 750:         0     0</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="step-4-and-5-variant-suspect-concomitant-interacting">Step 4 and 5 variant: Suspect, concomitant, interacting<a class="anchor" aria-label="anchor" href="#step-4-and-5-variant-suspect-concomitant-interacting"></a>
</h4>
<p>We can choose to work with drugs according to their “reputation
basis”.</p>
<p>This information is stored in the <code>Basis</code> column of the
<code>drug</code> table.</p>
<ul>
<li><p>1 suspect</p></li>
<li><p>2 concomitant</p></li>
<li><p>3 interacting</p></li>
</ul>
<p>By using the <code><a href="../reference/add_drug.html">add_drug()</a></code> function, we can specify which
type of status we are interested in, in the <code>repbasis</code>
argument. By default, the value <code>"sci"</code> indicates that we
consider the drug whether it is suspect, concomitant, or interacting. We
can change the selection.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">demo</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="../reference/add_drug.html">add_drug</a></span><span class="op">(</span></span>
<span>    d_code <span class="op">=</span> <span class="va">d_drecno</span>,</span>
<span>    drug_data <span class="op">=</span> <span class="va">drug</span>,</span>
<span>    repbasis <span class="op">=</span> <span class="st">"sci"</span></span>
<span>  <span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="../reference/check_dm.html">check_dm</a></span><span class="op">(</span><span class="st">"nivolumab"</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> `.data` detected as `demo` table.</span></span>
<span><span class="co">#&gt;           [,1]</span></span>
<span><span class="co">#&gt; nivolumab  225</span></span>
<span></span>
<span><span class="co"># suspected only</span></span>
<span></span>
<span><span class="va">demo</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="../reference/add_drug.html">add_drug</a></span><span class="op">(</span></span>
<span>    d_code <span class="op">=</span> <span class="va">d_drecno</span>,</span>
<span>    drug_data <span class="op">=</span> <span class="va">drug</span>,</span>
<span>    repbasis <span class="op">=</span> <span class="st">"s"</span></span>
<span>  <span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="../reference/check_dm.html">check_dm</a></span><span class="op">(</span><span class="st">"nivolumab"</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> `.data` detected as `demo` table.</span></span>
<span><span class="co">#&gt;           [,1]</span></span>
<span><span class="co">#&gt; nivolumab  214</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="create-multiple-drug-columns">Create multiple drug columns<a class="anchor" aria-label="anchor" href="#create-multiple-drug-columns"></a>
</h4>
<p>To work with multiple drugs, you need to update the initial
<code>d_sel</code> list.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">d_sel</span> <span class="op">&lt;-</span> </span>
<span>  <span class="fu"><a href="https://rlang.r-lib.org/reference/list2.html" class="external-link">list2</a></span><span class="op">(</span></span>
<span>    nivolumab <span class="op">=</span> <span class="st">"nivolumab"</span>,</span>
<span>    pembrolizumab <span class="op">=</span> <span class="st">"pembrolizumab"</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="va">d_drecno</span> <span class="op">&lt;-</span></span>
<span>  <span class="va">d_sel</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="../reference/get_drecno.html">get_drecno</a></span><span class="op">(</span>mp <span class="op">=</span> <span class="va">mp</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">──</span> <span style="font-weight: bold;">get_drecno()</span> <span style="color: #00BBBB;">────────────────────────────────────────────────────────────────</span></span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── <span style="font-weight: bold;">`d_sel`: Matching drugs</span> ──</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── <span style="color: #00BB00;">✔</span> Matched drugs</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; → `nivolumab`: <span style="color: #0000BB;">"nivolumab"</span> and <span style="color: #0000BB;">"ipilimumab;nivolumab"</span></span></span>
<span><span class="co">#&gt; → `pembrolizumab`: <span style="color: #0000BB;">"pembrolizumab"</span></span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> Set `verbose` to FALSE to suppress this section.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ────────────────────────────────────────────────────────────────────────────────</span></span>
<span></span>
<span><span class="va">demo</span> <span class="op">&lt;-</span> </span>
<span>  <span class="va">demo</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="../reference/add_drug.html">add_drug</a></span><span class="op">(</span></span>
<span>    <span class="va">d_drecno</span>,</span>
<span>    drug_data <span class="op">=</span> <span class="va">drug</span></span>
<span>  <span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> `.data` detected as `demo` table.</span></span>
<span></span>
<span><span class="va">demo</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="../reference/check_dm.html">check_dm</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"nivolumab"</span>, <span class="st">"pembrolizumab"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt;               [,1]</span></span>
<span><span class="co">#&gt; nivolumab      225</span></span>
<span><span class="co">#&gt; pembrolizumab  298</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="drug-groups">Drug groups<a class="anchor" aria-label="anchor" href="#drug-groups"></a>
</h4>
<p>If you want to work at the level of a group of drugs, but the ATC
classes do not match your needs perfectly, you can group them in the
<code>d_sel</code> list.</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">d_sel</span> <span class="op">&lt;-</span> </span>
<span>  <span class="fu"><a href="https://rlang.r-lib.org/reference/list2.html" class="external-link">list2</a></span><span class="op">(</span></span>
<span>    analgesics <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"paracetamol"</span>, <span class="st">"tramadol"</span><span class="op">)</span>,</span>
<span>    ici <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"nivolumab"</span>, <span class="st">"pembrolizumab"</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="va">d_drecno</span> <span class="op">&lt;-</span></span>
<span>  <span class="va">d_sel</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="../reference/get_drecno.html">get_drecno</a></span><span class="op">(</span>mp <span class="op">=</span> <span class="va">mp</span>,</span>
<span>             allow_combination <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">──</span> <span style="font-weight: bold;">get_drecno()</span> <span style="color: #00BBBB;">────────────────────────────────────────────────────────────────</span></span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── <span style="font-weight: bold;">`d_sel`: Matching drugs</span> ──</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── <span style="color: #00BB00;">✔</span> Matched drugs</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; → `analgesics`: <span style="color: #0000BB;">"paracetamol"</span> and <span style="color: #0000BB;">"tramadol"</span></span></span>
<span><span class="co">#&gt; → `ici`: <span style="color: #0000BB;">"nivolumab"</span> and <span style="color: #0000BB;">"pembrolizumab"</span></span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> Set `verbose` to FALSE to suppress this section.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ────────────────────────────────────────────────────────────────────────────────</span></span>
<span></span>
<span><span class="va">demo</span> <span class="op">&lt;-</span> </span>
<span>  <span class="va">demo</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="../reference/add_drug.html">add_drug</a></span><span class="op">(</span></span>
<span>    <span class="va">d_drecno</span>,</span>
<span>    drug_data <span class="op">=</span> <span class="va">drug</span></span>
<span>  <span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> `.data` detected as `demo` table.</span></span>
<span></span>
<span><span class="va">demo</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="../reference/check_dm.html">check_dm</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">d_sel</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt;            [,1]</span></span>
<span><span class="co">#&gt; analgesics   68</span></span>
<span><span class="co">#&gt; ici         519</span></span></code></pre></div>
</div>
</div>
<div class="section level3">
<h3 id="adverse-drug-reactions">Adverse drug reactions<a class="anchor" aria-label="anchor" href="#adverse-drug-reactions"></a>
</h3>
<div class="section level4">
<h4 id="principles">Principles<a class="anchor" aria-label="anchor" href="#principles"></a>
</h4>
<ol style="list-style-type: decimal">
<li><p>Load the <code>demo</code>, <code>adr</code>, and
<code>meddra</code> tables.</p></li>
<li><p>Choose the adverse event(s) of interest.</p></li>
<li><p>Identify the event codes (these are low-level terms according to
the MedDRA classification). They can be found in the <code>meddra</code>
table or in the <code>smq</code> tables.</p></li>
<li><p>Search for cases that have presented this event, using the
codes</p></li>
<li><p>Update the <code>demo</code> table: code 1 if the case reports
the event of interest, 0 otherwise.</p></li>
<li><p>Check your data management</p></li>
</ol>
<p>Similarly to the <a href="#drug_workflow">drug workflow</a>, steps 2
and 3 can be referred to as “dictionary” steps.</p>
<p>Step 3 uses <code><a href="../reference/get_llt_soc.html">get_llt_soc()</a></code> or
<code><a href="../reference/get_llt_smq.html">get_llt_smq()</a></code>.</p>
</div>
<div class="section level4">
<h4 id="step-1-load-the-tables-1">Step 1: Load the tables<a class="anchor" aria-label="anchor" href="#step-1-load-the-tables-1"></a>
</h4>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">adr</span> <span class="op">&lt;-</span> <span class="va">adr_</span></span>
<span><span class="va">meddra</span> <span class="op">&lt;-</span> <span class="va">meddra_</span></span></code></pre></div>
<p>demo was loaded during the <a href="#drug_workflow">drug
workflow</a>.</p>
</div>
<div class="section level4">
<h4 id="step-2-choose-events-of-interest">Step 2: Choose events of interest<a class="anchor" aria-label="anchor" href="#step-2-choose-events-of-interest"></a>
</h4>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">a_sel_pt</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu"><a href="https://rlang.r-lib.org/reference/list2.html" class="external-link">list2</a></span><span class="op">(</span></span>
<span>    a_colitis <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>      <span class="st">"Colitis"</span>,</span>
<span>      <span class="st">"Autoimmune colitis"</span>,</span>
<span>      <span class="st">"Colitis microscopic"</span>,</span>
<span>      <span class="st">"Diarrhoea"</span>,</span>
<span>      <span class="st">"Diarrhoea haemorrhagic"</span>,</span>
<span>      <span class="st">"Duodenitis"</span>,</span>
<span>      <span class="st">"Enteritis"</span>,</span>
<span>      <span class="st">"Enterocolitis"</span>,</span>
<span>      <span class="st">"Enterocolitis haemorrhagic"</span>,</span>
<span>      <span class="st">"Ulcerative gastritis"</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<p>We start with a list of adverse events of interest, grouped
altogether under the name “a_colitis”.</p>
<blockquote>
<p>MedDRA terms always start with a capital letter, be sure to provide
the exact case, e.g. Good : “<strong>C</strong>olitis”, Wrong :
“colitis” or “COLITIS”.</p>
</blockquote>
<p>Be sure all selected terms belong to the same hierarchical level
(preferred term, high level term…) in MedDRA. Here, we use Preferred
Terms.</p>
</div>
<div class="section level4">
<h4 id="step-3-identify-event-codes">Step 3: Identify event codes<a class="anchor" aria-label="anchor" href="#step-3-identify-event-codes"></a>
</h4>
<p>The <code><a href="../reference/get_llt_soc.html">get_llt_soc()</a></code> function allows you to query the
<code>meddra</code>.</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">a_llt</span> <span class="op">&lt;-</span> </span>
<span>  <span class="fu"><a href="../reference/get_llt_soc.html">get_llt_soc</a></span><span class="op">(</span></span>
<span>    term_sel <span class="op">=</span> <span class="va">a_sel_pt</span>,</span>
<span>    term_level <span class="op">=</span> <span class="st">"pt"</span>,</span>
<span>    meddra <span class="op">=</span> <span class="va">meddra_</span></span>
<span>    <span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">──</span> <span style="font-weight: bold;">get_llt_soc()</span> <span style="color: #00BBBB;">───────────────────────────────────────────────────────────────</span></span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── <span style="color: #00BB00; font-weight: bold;">✔</span><span style="font-weight: bold;"> Matched reactions at `pt` level (number of codes)</span> ──</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; → `a_colitis`: <span style="color: #0000BB;">"Autoimmune colitis (1)"</span>, <span style="color: #0000BB;">"Colitis (25)"</span>, <span style="color: #0000BB;">"Colitis microscopic</span></span></span>
<span><span class="co">#&gt;   <span style="color: #0000BB;">(3)"</span>, <span style="color: #0000BB;">"Diarrhoea (53)"</span>, <span style="color: #0000BB;">"Diarrhoea haemorrhagic (8)"</span>, <span style="color: #0000BB;">"Duodenitis (5)"</span>,</span></span>
<span><span class="co">#&gt;   <span style="color: #0000BB;">"Enteritis (8)"</span>, <span style="color: #0000BB;">"Enterocolitis (4)"</span>, <span style="color: #0000BB;">"Enterocolitis haemorrhagic (10)"</span>, and</span></span>
<span><span class="co">#&gt;   <span style="color: #0000BB;">"Ulcerative gastritis (1)"</span></span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> Set `verbose` to FALSE to suppress this section.</span></span>
<span></span>
<span><span class="va">a_llt</span></span>
<span><span class="co">#&gt; $a_colitis</span></span>
<span><span class="co">#&gt;   [1] 146319904  72535511 145048103  83961164  60502763  86999793  31902962</span></span>
<span><span class="co">#&gt;   [8]  74358151  93223730  42212111  47872019   9787331  97183180  76243579</span></span>
<span><span class="co">#&gt;  [15]  57421483  83801839  35994947 145921181 126960392 139876147   7485419</span></span>
<span><span class="co">#&gt;  [22]  56928874 106618606 136185109 134273207  69329666  71614386  39085290</span></span>
<span><span class="co">#&gt;  [29]  44792724  60161897 117694644  33268936  52457844   3588697  50677287</span></span>
<span><span class="co">#&gt;  [36]  86522225  52090591 115452495  57673555  36505933  97974705 116341322</span></span>
<span><span class="co">#&gt;  [43] 100087548  92141110  76778618 129074932  74911722  30822686 106700292</span></span>
<span><span class="co">#&gt;  [50]  40062048  94663343  99951844  10796290  16785547 100720721  26400336</span></span>
<span><span class="co">#&gt;  [57]  71857357   9581412 142354851 119711285  14275999 116525173  46785130</span></span>
<span><span class="co">#&gt;  [64]  69158837  92034682  11303229  32580170 122765038  94746500  97136680</span></span>
<span><span class="co">#&gt;  [71]  92371714 104194644  80678406 130746421   6544507  54366037  11722654</span></span>
<span><span class="co">#&gt;  [78]  23855288    996046 104846192  35477411  75848043   5029037  50188094</span></span>
<span><span class="co">#&gt;  [85]  84444296 136071015   5144633  62896477  85459432 142989340  22136645</span></span>
<span><span class="co">#&gt;  [92]  33346088  89785585  72565521  53464576 138014054  76736595 121450460</span></span>
<span><span class="co">#&gt;  [99]  52582197  39107722  31994263  68617678 128230716 114942138  24470833</span></span>
<span><span class="co">#&gt; [106]  27038937  54746042  71417752  12508751  74249211 109131610 121557512</span></span>
<span><span class="co">#&gt; [113]  18989134 118819900  11580419 137272208 137544759  76219908</span></span></code></pre></div>
<p>An alternative is to use the <code><a href="../reference/get_llt_smq.html">get_llt_smq()</a></code> function,
which allows you to query the <code>smq</code> tables.</p>
<p>Notice that you collect low level term codes, even if you work with
higher level terms, like preferred terms, or high level terms. This is
intentional: this list collects all low level term codes composing the
higher level term. See <a href="#collecting_ids">Collecting ID
section</a>.</p>
</div>
<div class="section level4">
<h4 id="steps-4-and-5-add_adr-function">Steps 4 and 5: add_adr() function<a class="anchor" aria-label="anchor" href="#steps-4-and-5-add_adr-function"></a>
</h4>
<p>The <code><a href="../reference/add_adr.html">add_adr()</a></code> function allows you to identify cases
reporting the adverse event of interest and add the corresponding column
to <code>demo</code>.</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">demo</span> <span class="op">&lt;-</span> </span>
<span>  <span class="fu"><a href="../reference/add_adr.html">add_adr</a></span><span class="op">(</span></span>
<span>    .data <span class="op">=</span> <span class="va">demo</span>,</span>
<span>    a_code <span class="op">=</span> <span class="va">a_llt</span>,</span>
<span>    adr_data <span class="op">=</span> <span class="va">adr</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> `.data` detected as `demo` table.</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="step-6-check-your-data-management-1">Step 6: Check your data management<a class="anchor" aria-label="anchor" href="#step-6-check-your-data-management-1"></a>
</h4>
<p><code><a href="../reference/check_dm.html">check_dm()</a></code> also works for adr.</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">demo</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="../reference/check_dm.html">check_dm</a></span><span class="op">(</span><span class="st">"a_colitis"</span><span class="op">)</span></span>
<span><span class="co">#&gt;           [,1]</span></span>
<span><span class="co">#&gt; a_colitis  104</span></span></code></pre></div>
</div>
</div>
<div class="section level3">
<h3 id="other-variables">Other variables<a class="anchor" aria-label="anchor" href="#other-variables"></a>
</h3>
<p>We may need to create other variables to perform our analysis, for
example age and sex in a multivariable analysis.</p>
<div class="section level4">
<h4 id="age">Age<a class="anchor" aria-label="anchor" href="#age"></a>
</h4>
<p>The <code>demo</code> table contains the <code>AgeGroup</code>
column, which groups ages into categories. You may want to recode it to
match you research question</p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">demo</span> <span class="op">&lt;-</span></span>
<span>  <span class="va">demo</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span></span>
<span>    age <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/cut.html" class="external-link">cut</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/integer.html" class="external-link">as.integer</a></span><span class="op">(</span><span class="va">AgeGroup</span><span class="op">)</span>,</span>
<span>              breaks <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">4</span>,<span class="fl">5</span>,<span class="fl">6</span>,<span class="fl">7</span>,<span class="fl">8</span><span class="op">)</span>,</span>
<span>              include.lowest <span class="op">=</span> <span class="cn">TRUE</span>, right <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>              labels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"&lt;18"</span>, <span class="st">"18-45"</span>,<span class="st">"45-64"</span>, <span class="st">"65-74"</span>, <span class="st">"75+"</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="sex">Sex<a class="anchor" aria-label="anchor" href="#sex"></a>
</h4>
<p>The <code>demo</code> table contains the <code>Gender</code> column,
from which you can also create a new sex column (with values 1 for men,
2 for women, and NA otherwise)</p>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">demo</span> <span class="op">&lt;-</span></span>
<span>  <span class="va">demo</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span></span>
<span>    sex <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="va">Gender</span> <span class="op">==</span> <span class="st">"1"</span>, <span class="fl">1</span>,</span>
<span>                 <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="va">Gender</span> <span class="op">==</span> <span class="st">"2"</span>, <span class="fl">2</span>, <span class="cn">NA_real_</span><span class="op">)</span></span>
<span>                 <span class="op">)</span></span>
<span>    <span class="op">)</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="using-case_when">Using case_when()<a class="anchor" aria-label="anchor" href="#using-case_when"></a>
</h4>
<p>The <code><a href="https://dplyr.tidyverse.org/reference/case_when.html" class="external-link">case_when()</a></code> function from the <code>dplyr</code>
package allows you to manage multiple options in a single function, with
a slightly different syntax.</p>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">demo</span> <span class="op">&lt;-</span> </span>
<span>  <span class="va">demo</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span></span>
<span>    sex <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/case_when.html" class="external-link">case_when</a></span><span class="op">(</span><span class="va">Gender</span> <span class="op">==</span> <span class="st">"1"</span> <span class="op">~</span> <span class="fl">1</span>,</span>
<span>                    <span class="va">Gender</span> <span class="op">==</span> <span class="st">"2"</span> <span class="op">~</span> <span class="fl">2</span>,</span>
<span>                    <span class="cn">TRUE</span> <span class="op">~</span> <span class="cn">NA_real_</span><span class="op">)</span></span>
<span>    <span class="op">)</span></span></code></pre></div>
<p>More documentation on <code><a href="https://dplyr.tidyverse.org/reference/case_when.html" class="external-link">case_when()</a></code> can be found in the
<code>dplyr</code> package documentation.</p>
<p>You should just remember here that options are evaluated
sequentially, from top to bottom.</p>
</div>
<div class="section level4">
<h4 id="seriousness-death">Seriousness, death<a class="anchor" aria-label="anchor" href="#seriousness-death"></a>
</h4>
<p>The <code>out</code> table contains the <code>Seriousness</code>
column, which indicates whether the case was serious or not, and whether
the patient experienced a fatal issue during his/her follow-up.</p>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># ---- Serious ---- ####</span></span>
<span></span>
<span><span class="va">out</span> <span class="op">&lt;-</span> <span class="va">out_</span></span>
<span></span>
<span><span class="va">demo</span> <span class="op">&lt;-</span> </span>
<span>  <span class="va">demo</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span></span>
<span>    serious <span class="op">=</span> </span>
<span>      <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span></span>
<span>        <span class="va">UMCReportId</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="va">out</span><span class="op">$</span><span class="va">UMCReportId</span>,</span>
<span>        <span class="va">UMCReportId</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> </span>
<span>          <span class="op">(</span><span class="va">out</span> <span class="op">|&gt;</span> </span>
<span>          <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">Serious</span> <span class="op">==</span> <span class="st">"Y"</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>          <span class="fu"><a href="https://dplyr.tidyverse.org/reference/pull.html" class="external-link">pull</a></span><span class="op">(</span><span class="va">UMCReportId</span><span class="op">)</span></span>
<span>          <span class="op">)</span>,</span>
<span>        <span class="cn">NA</span><span class="op">)</span></span>
<span>    <span class="op">)</span></span>
<span></span>
<span><span class="co"># ---- Death + outcome availability ---- ####</span></span>
<span></span>
<span><span class="va">demo</span> <span class="op">&lt;-</span> </span>
<span>  <span class="va">demo</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>death <span class="op">=</span> </span>
<span>           <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="va">UMCReportId</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="va">out</span><span class="op">$</span><span class="va">UMCReportId</span>,</span>
<span>                  <span class="va">UMCReportId</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> </span>
<span>                    <span class="op">(</span><span class="va">out</span> <span class="op">|&gt;</span> </span>
<span>                    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">Seriousness</span> <span class="op">==</span> <span class="st">"1"</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>                    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/pull.html" class="external-link">pull</a></span><span class="op">(</span><span class="va">UMCReportId</span><span class="op">)</span></span>
<span>                    <span class="op">)</span>,</span>
<span>                  <span class="cn">NA</span><span class="op">)</span></span>
<span>         <span class="op">)</span></span></code></pre></div>
<ul>
<li><p>The <code>serious</code> and <code>death</code> columns are coded
with TRUE/FALSE values in this example. There is no particular reason to
prefer it over 1/0 codes. It is just a matter of preference.</p></li>
<li><p>The <code>Seriousness</code> can have several levels, level 1
being death. (see subsidiary files)</p></li>
</ul>
</div>
</div>
</div>
<div class="section level2">
<h2 id="disproportionality">Disproportionality<a class="anchor" aria-label="anchor" href="#disproportionality"></a>
</h2>
<p>Our <code>demo</code> dataset now has a drug column for nivolumab,
and an adr column for colitis.</p>
<p>We can perform a disproportionality analysis between these two
variables.</p>
<div class="section level3">
<h3 id="univariate-analysis">Univariate analysis<a class="anchor" aria-label="anchor" href="#univariate-analysis"></a>
</h3>
<div class="section level4">
<h4 id="disproportionality-metrics">Disproportionality metrics<a class="anchor" aria-label="anchor" href="#disproportionality-metrics"></a>
</h4>
<p>Reporting Odds-Ratio (ROR) and Information Component essentially
measure the same thing: the disproportionality.</p>
<p><code><a href="../reference/compute_dispro.html">compute_dispro()</a></code> computes both of these.</p>
<ul>
<li><p><code>or</code> and <code>or_ci</code> are the reporting
Odds-Ratio and its confidence interval (default: 95%CI).</p></li>
<li><p><code>ic</code> and <code>ic_tail</code> are the Information
Component, and its lower end of credibility interval (default:
IC025).</p></li>
</ul>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">demo</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="../reference/compute_dispro.html">compute_dispro</a></span><span class="op">(</span></span>
<span>    y <span class="op">=</span> <span class="st">"a_colitis"</span>,</span>
<span>    x <span class="op">=</span> <span class="st">"nivolumab"</span></span>
<span>    <span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 1 × 9</span></span></span>
<span><span class="co">#&gt;   y         x         n_obs n_exp or    or_ci          ic ic_tail ci_level</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> a_colitis nivolumab    44  31.2 1.88  (1.23-2.88) 0.489  0.031<span style="text-decoration: underline;">4</span> 95%</span></span></code></pre></div>
</div>
</div>
<div class="section level3">
<h3 id="advanced-modelling-multivariate-analysis">Advanced modelling, multivariate analysis<a class="anchor" aria-label="anchor" href="#advanced-modelling-multivariate-analysis"></a>
</h3>
<p>From this point, it is also possible to run any statistical model
including drug and adr parameters, but also potential other variables
such as age and sex. For example, one could wish to perform a
multivariate logistic regression on the reporting of colitis and
nivolumab, adjusted on age groups and sex.</p>
<p>The <code><a href="https://rdrr.io/r/stats/glm.html" class="external-link">glm()</a></code> function from the <code>stats</code> package
can be used for this purpose.</p>
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mod</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/glm.html" class="external-link">glm</a></span><span class="op">(</span><span class="va">a_colitis</span> <span class="op">~</span> <span class="va">nivolumab</span>, </span>
<span>           data <span class="op">=</span> <span class="va">demo</span>, family <span class="op">=</span> <span class="st">"binomial"</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">mod</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Call:</span></span>
<span><span class="co">#&gt; glm(formula = a_colitis ~ nivolumab, family = "binomial", data = demo)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Coefficients:</span></span>
<span><span class="co">#&gt;             Estimate Std. Error z value Pr(&gt;|z|)    </span></span>
<span><span class="co">#&gt; (Intercept)  -2.0477     0.1372 -14.928  &lt; 2e-16 ***</span></span>
<span><span class="co">#&gt; nivolumab     0.6334     0.2170   2.919  0.00351 ** </span></span>
<span><span class="co">#&gt; ---</span></span>
<span><span class="co">#&gt; Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; (Dispersion parameter for binomial family taken to be 1)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     Null deviance: 603.80  on 749  degrees of freedom</span></span>
<span><span class="co">#&gt; Residual deviance: 595.53  on 748  degrees of freedom</span></span>
<span><span class="co">#&gt; AIC: 599.53</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Number of Fisher Scoring iterations: 4</span></span></code></pre></div>
<p>In a logistic regression models, estimates lead to (reporting) OR by
the exponential.</p>
<div class="sourceCode" id="cb27"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">mod</span><span class="op">)</span><span class="op">$</span><span class="va">coefficients</span></span>
<span><span class="co">#&gt;               Estimate Std. Error    z value     Pr(&gt;|z|)</span></span>
<span><span class="co">#&gt; (Intercept) -2.0476928  0.1371736 -14.927752 2.174746e-50</span></span>
<span><span class="co">#&gt; nivolumab    0.6333854  0.2169532   2.919456 3.506429e-03</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">exp</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">mod</span><span class="op">)</span><span class="op">$</span><span class="va">coefficients</span><span class="op">[</span><span class="fl">2</span>, <span class="fl">1</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 1.883978</span></span></code></pre></div>
<p>Adding covariates is straightforward</p>
<div class="sourceCode" id="cb28"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mod2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/glm.html" class="external-link">glm</a></span><span class="op">(</span><span class="va">a_colitis</span> <span class="op">~</span> <span class="va">nivolumab</span> <span class="op">+</span> <span class="va">sex</span> <span class="op">+</span> <span class="va">age</span>,</span>
<span>            data <span class="op">=</span> <span class="va">demo</span>,</span>
<span>            family <span class="op">=</span> <span class="st">"binomial"</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">mod2</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Call:</span></span>
<span><span class="co">#&gt; glm(formula = a_colitis ~ nivolumab + sex + age, family = "binomial", </span></span>
<span><span class="co">#&gt;     data = demo)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Coefficients:</span></span>
<span><span class="co">#&gt;             Estimate Std. Error z value Pr(&gt;|z|)  </span></span>
<span><span class="co">#&gt; (Intercept) -14.8881   882.7435  -0.017   0.9865  </span></span>
<span><span class="co">#&gt; nivolumab     0.4613     0.2679   1.722   0.0851 .</span></span>
<span><span class="co">#&gt; sex           0.1610     0.2517   0.640   0.5223  </span></span>
<span><span class="co">#&gt; age18-45     12.7789   882.7435   0.014   0.9884  </span></span>
<span><span class="co">#&gt; age45-64     12.7362   882.7434   0.014   0.9885  </span></span>
<span><span class="co">#&gt; age65-74     13.1715   882.7434   0.015   0.9881  </span></span>
<span><span class="co">#&gt; age75+       12.6702   882.7434   0.014   0.9885  </span></span>
<span><span class="co">#&gt; ---</span></span>
<span><span class="co">#&gt; Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; (Dispersion parameter for binomial family taken to be 1)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     Null deviance: 436.14  on 489  degrees of freedom</span></span>
<span><span class="co">#&gt; Residual deviance: 429.24  on 483  degrees of freedom</span></span>
<span><span class="co">#&gt;   (260 observations deleted due to missingness)</span></span>
<span><span class="co">#&gt; AIC: 443.24</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Number of Fisher Scoring iterations: 13</span></span></code></pre></div>
<div class="section level4">
<h4 id="extract-odds-ratio-with-compute_or_mod">Extract Odds-Ratio with compute_or_mod()<a class="anchor" aria-label="anchor" href="#extract-odds-ratio-with-compute_or_mod"></a>
</h4>
<p>There are several packages that can extract the OR from a model. The
<code><a href="../reference/compute_or_mod.html">compute_or_mod()</a></code> function is just one of many ways to do
it.</p>
<div class="sourceCode" id="cb29"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mod_or</span> <span class="op">&lt;-</span> </span>
<span>  <span class="fu"><a href="../reference/compute_or_mod.html">compute_or_mod</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">mod2</span><span class="op">)</span><span class="op">$</span><span class="va">coefficients</span>,</span>
<span>    estimate <span class="op">=</span> <span class="va">Estimate</span>,</span>
<span>    std_er <span class="op">=</span> <span class="va">Std..Error</span></span>
<span>    <span class="op">)</span></span>
<span></span>
<span><span class="va">mod_or</span></span>
<span><span class="co">#&gt;             rn    Estimate  Std..Error     z.value   Pr...z..           or</span></span>
<span><span class="co">#&gt;         &lt;char&gt;       &lt;num&gt;       &lt;num&gt;       &lt;num&gt;      &lt;num&gt;        &lt;num&gt;</span></span>
<span><span class="co">#&gt; 1: (Intercept) -14.8881304 882.7435188 -0.01686575 0.98654372 3.421111e-07</span></span>
<span><span class="co">#&gt; 2:   nivolumab   0.4613151   0.2679460  1.72167184 0.08512898 1.586159e+00</span></span>
<span><span class="co">#&gt; 3:         sex   0.1610313   0.2516929  0.63979269 0.52230739 1.174722e+00</span></span>
<span><span class="co">#&gt; 4:    age18-45  12.7789374 882.7434892  0.01447639 0.98844992 3.546680e+05</span></span>
<span><span class="co">#&gt; 5:    age45-64  12.7361773 882.7434133  0.01442795 0.98848856 3.398220e+05</span></span>
<span><span class="co">#&gt; 6:    age65-74  13.1714980 882.7434134  0.01492109 0.98809513 5.251809e+05</span></span>
<span><span class="co">#&gt; 7:      age75+  12.6701788 882.7434409  0.01435318 0.98854821 3.181184e+05</span></span>
<span><span class="co">#&gt;       low_ci    up_ci        orl          ci ci_level signif_ror</span></span>
<span><span class="co">#&gt;        &lt;num&gt;    &lt;num&gt;     &lt;char&gt;      &lt;char&gt;   &lt;char&gt;      &lt;num&gt;</span></span>
<span><span class="co">#&gt; 1: 0.0000000      Inf       0.00  (0.00-Inf)      95%          0</span></span>
<span><span class="co">#&gt; 2: 0.9381463 2.681777       1.59 (0.94-2.68)      95%          0</span></span>
<span><span class="co">#&gt; 3: 0.7172881 1.923873       1.17 (0.72-1.92)      95%          0</span></span>
<span><span class="co">#&gt; 4: 0.0000000      Inf 354,668.00  (0.00-Inf)      95%          0</span></span>
<span><span class="co">#&gt; 5: 0.0000000      Inf 339,822.03  (0.00-Inf)      95%          0</span></span>
<span><span class="co">#&gt; 6: 0.0000000      Inf 525,180.88  (0.00-Inf)      95%          0</span></span>
<span><span class="co">#&gt; 7: 0.0000000      Inf 318,118.36  (0.00-Inf)      95%          0</span></span></code></pre></div>
</div>
</div>
</div>
<div class="section level2">
<h2 id="conclusion">Conclusion<a class="anchor" aria-label="anchor" href="#conclusion"></a>
</h2>
<p>You’re now all set to create drugs and adrs columns into a
<code>demo</code> dataset. This is the first step to many modelling
possibilities!</p>
<p>Where do you want to go next?</p>
<ul>
<li><p>Dive into descriptive features, such as time to onset,
dechallenge, rechallenge, screening of drugs and adrs.
<code><a href="../articles/descriptive.html">vignette("descriptive")</a></code></p></li>
<li><p>Learn on interactions in pharmacovigilance database
<code><a href="../articles/interactions.html">vignette("interactions")</a></code></p></li>
</ul>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Charles Dolladille, Basile Chrétien.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
